<!DOCTYPE html>
<html>
<head>
    <meta content="text/html; charset=utf-8" http-equiv="content-type">
    <meta name="viewport" content="width=device-width, height=device-height, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" />
    <link href="computer.gif" rel="shortcut icon">
    <title>Derek Williams</title>
    <link href="css-reset.css" rel="Stylesheet">
    <link href="MTG-Life.css" rel="Stylesheet">
</head>
<body>
    <ul class="desktop-icons">
        <li id="resume">
            <a href="https://drive.google.com/open?id=0BxCxhGImJ05_b1RseG9uRzdfbXM" target="_blank">
            <div class="link-icon"><img src="Images/shell32_35.ico"></div>
            <div class="link-text">
                Resume
            </div></a>
        </li>
        <li id="about">
            <a href="http://derekwilliamsfl.github.io/Magic-Life/" target="about">
            <div class="link-icon"><img src="Images/shell32_24.ico"></div>
            <div class="link-text">
                About Me
            </div></a>
        </li>
        <li id="github">
            <a href="https://github.com/DerekWilliamsFL" target="_blank">
            <div class="link-icon"><img src="Images/shell32_32.ico"></div>
            <div class="link-text">
                GitHub
            </div></a>
        </li>
        <li id="journey">
            <a href="http://derekwilliamsfl.github.io/Canvas/" target=
            "journey">
            <div class="link-icon"><img src="Images/character.png"></div>
            <div class="link-text">
                Journey
            </div></a>
        </li>
        <li id="imdb">
            <a href="http://derekwilliamsfl.github.io/imdb-api/" target="imdb">
            <div class="link-icon"><img src="Images/imdb.png"></div>
            <div class="link-text">
                iMDB Search
            </div></a>
        </li>
        <li id="sttropez">
            <a href="http://derekwilliamsfl.github.io/St.Tropez/" target=
            "sttropez">
            <div class="link-icon"><img src="Images/purse.png"></div>
            <div class="link-text">
                St.Tropez
            </div></a>
        </li>
        <li id="drivein">
            <a href="http://derekwilliamsfl.github.io/Drive-In-Theater/"
            target="drivein">
            <div class="link-icon"><img height="32" src="Images/dit.png" width=
            "32"></div>
            <div class="link-text">
                Drive In
            </div></a>
        </li>
        <li id="email">
            <a>
            <div class="link-icon"><img height="32" src="Images/email.png"
            width="32"></div>
            <div class="link-text">
                E-Mail
            </div></a>
        </li>
    </ul>
    <div class="application-frame" id="email-window">
        <header class="application-controlbar">
            <div class="application-title">
                <img height="16" src="Images/email.png" width="16">
                <span>Email</span>
            </div>
            <div class="application-button-group">
                <button class="minimize"></button> <button class=
                "close"></button>
            </div>
        </header>
        <form id="contactform" name="contactform">
            <div class="emailform">
                <span>Name:</span> <input name="name" type="text" required>
            </div>
            <div style="clear: both;"></div>
            <div class="emailform">
                <span>Email:</span> <input name="_replyto" type="email" required>
            </div>
            <div style="clear: both;"></div>
            <textarea data-role="none" name="message" required></textarea>
            <div class="emailform">
                <input id="sendMessage" type="submit">
            </div>
            <div id="sendprogress"></div>
        </form>
    </div>
    <div class="application-frame" id="about-window">
        <header class="application-controlbar">
            <div class="application-title">
                <img height="16" src="Images/shell32_24.ico" width="16">
                <span>About Me</span>
            </div>
            <div class="application-button-group">
                <button class="minimize"></button> <button class=
                "close"></button>
            </div>
        </header>
        <div class="iframe">
            <iframe id="about" name="about" src=
            "http://derekwilliamsfl.github.io/Magic-Life/"></iframe>
        </div>
    </div>
    <div class="application-frame" id="resume-window">
        <header class="application-controlbar">
            <div class="application-title">
                <img height="16" src="Images/shell32_35.ico" width="16">
                <span>Resume</span>
            </div>
            <div class="application-button-group">
                <button class="minimize"></button> <button class=
                "close"></button>
            </div>
        </header>
        <div class="iframe">
        </div>
    </div>
    <div class="application-frame" id="drivein-window">
        <header class="application-controlbar">
            <div class="application-title">
                <img height="16" src="Images/dit.png" width="16"> <span>Drive
                In Theater</span>
            </div>
            <div class="application-button-group">
                <button class="minimize"></button> <button class=
                "close"></button>
            </div>
        </header>
        <div class="iframe">
            <iframe id="ditiframe" name="drivein" src=
            "http://derekwilliamsfl.github.io/Drive-In-Theater/"></iframe>
        </div>
    </div>
    <div class="application-frame" id="imdb-window">
        <header class="application-controlbar">
            <div class="application-title">
                <img height="16" src="Images/imdb.png" width="16"> <span>iMDB
                Search</span>
            </div>
            <div class="application-button-group">
                <button class="minimize"></button> <button class=
                "close"></button>
            </div>
        </header>
        <div class="iframe">
            <iframe id="imdb" name="imdb" src=
            "http://derekwilliamsfl.github.io/imdb-api/"></iframe>
        </div>
    </div>
    <div class="application-frame" id="journey-window">
        <header class="application-controlbar">
            <div class="application-title">
                <img height="16" src="Images/character.png" width="16">
                <span>Journey in Canvas</span>
            </div>
            <div class="application-button-group">
                <button class="minimize"></button> <button class=
                "close"></button>
            </div>
        </header>
        <div class="iframe">
            <iframe id="journey" name="journey" src=
            "http://derekwilliamsfl.github.io/Canvas/"></iframe>
        </div>
    </div>
    <div class="application-frame" id="sttropez-window">
        <header class="application-controlbar">
            <div class="application-title">
                <img height="16" src="Images/purse.png" width="16"> <span>St.
                Tropez</span>
            </div>
            <div class="application-button-group">
                <button class="minimize"></button> <button class=
                "close"></button>
            </div>
        </header>
        <div class="iframe">
            <iframe id="sttropez" name="sttropez" src=
            "http://derekwilliamsfl.github.io/St.Tropez/"></iframe>
        </div>
    </div>
    <div class="start-menu"></div>
    <div class="bottom-dock">
        <button class="start-button"><img class="win95start" src=
        "Images/win95start.gif"> <span>Start</span></button>
        <div class="notif" id="inset-notif">
            <img src="Images/sound.gif"><span id="time">12:34</span>
        </div>
    </div>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.2/jquery.min.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.11.4/jquery-ui.min.js"></script>
<script src="http://code.jquery.com/mobile/1.4.5/jquery.mobile-1.4.5.min.js"></script>
<script>

function touchHandler(event) {
    var self = this;
    var touches = event.changedTouches,
        first = touches[0],
        type = "";
    switch (event.type) {
    case "touchstart":
        type = "mousedown";
        window.startY = event.pageY;
        break;
    case "touchmove":
        type = "mousemove";
        break;
    case "touchend":
        type = "mouseup";
        break;
    default:
        return;
    }
    var simulatedEvent = document.createEvent("MouseEvent");
    simulatedEvent.initMouseEvent(type, true, true, window, 1, first.screenX, first.screenY, first.clientX, first.clientY, false, false, false, false, 0 /*left*/ , null);
    first.target.dispatchEvent(simulatedEvent);
    var scrollables = [];
    var clickedInScrollArea = false;
    var parentEls = jQuery(event.target).parents().map(function() {
        try {
            if (jQuery(this).hasClass('is-scrollable')) {
                clickedInScrollArea = true;
                var direction = (window.startY < first.clientY) ? 'down' : 'up';
                if (((jQuery(this).scrollTop() <= 0) && (direction === 'down')) || ((jQuery(this).height() <= jQuery(this).scrollTop()) && (direction === 'up')) ){
                } else {
                    scrollables.push(this);
                }
            }
        } catch (e) {}
    });
    if ((scrollables.length === 0) && (type === 'mousemove')) {
        event.preventDefault();
    }
}



$("#sendMessage").on("click", function() {
    $.ajax({
        url: "https://formspree.io/derekwilliamsfl@gmail.com", 
        method: "POST",
        data: $("#contactform").serialize(),
        dataType: "json",
        beforeSend: function() { 
          $('#sendprogress').html("<p>Sending..</p>");
          $('#sendprogress').append("<img src='Images/email.gif'/>");
          $('#sendprogress img').css('display','block');
          $('#email-window form').css('border','none'); },
        success: function(data) {
        $('#sendprogress').html("<p>Sent!</p> ");
          $('#sendprogress').append("<img src='Images/sent.gif'/>");
          $('#sendprogress img').css('display','block');
          $('#email-window form').css('border','none'); },
        error: function(err) {
        $('#sendprogress').html("<p>Not Sent. Please try again.</p>");
          $('#sendprogress').append("<img src='Images/missed.gif'/>");
          $('#sendprogress img').css('display','block');
          $('#email-window form').css('border',''); }
    });
});

function initTouchHandler() {
    document.addEventListener("touchstart", touchHandler, true);
    document.addEventListener("touchmove", touchHandler, true);
    document.addEventListener("touchend", touchHandler, true);
    document.addEventListener("touchcancel", touchHandler, true);
}
  $(document).ready(function() {
    var originalState = $("#contactform").clone();
    $.mobile.loading().hide();
    function updateTime() {
      var dNow = new Date();
      var localdate =  dNow.getHours() + ':' + dNow.getMinutes();
      $('#time').text(localdate);
    }
    function doit(selector) {
        console.log(selector);
        $(selector).animate({
        'marginTop' : "+=1000px",
      }, 200, function () {
          $(selector).css('visibility', 'hidden');
        });
    };
    $(".minimize").bind('vclick', function (e){
      doit($(this).parent().parent().parent());
    });
    updateTime();
    setInterval(updateTime, 5000);
    function appendToDock(selector) {
      var imgsrc = $(selector).find('img').attr('src');
      var images = $('.docked').children('img').map(function(){
          return $(this).attr('src')
      }).get();
      if (images.indexOf(imgsrc) === -1) {
        $('.bottom-dock').append('<button class="docked"><img src=' + imgsrc + '></button>' );
      }
    };
    initTouchHandler();
    $(".application-frame").draggable({
      iframeFix: true,
      cursor: "pointer",
    });
    $(".bottom-dock").on('vclick', '.docked', function (e){
        var imgsrc = $(this).find('img').attr('src');
        var blue = $(".application-frame").find("img[src=" + "'" + imgsrc + "'" +"]").parent().parent().parent();
        var selector = "#" + blue.attr('id');
        if ($(selector).css('visibility') === 'hidden') {
          $(selector).css('visibility', 'visible');
          $(selector).animate({
        'marginTop' : "-=1000px",
      }, 200);
        }
        else if ($(selector).css('visibility') === 'visible') {
          console.log('blue');
        } 
    });
    $("#email").bind('vclick', function (e){
      $("#email-window").css('visibility', 'visible');
      appendToDock(this);
    });

    $("#drivein").bind('vclick', function (e){
      $("#drivein-window").css('visibility', 'visible');
      $("#drivein-window iframe").css('display', 'block');
      appendToDock(this);
    });
    $("#journey").bind('vclick', function (e){
      $("#journey-window").css('visibility', 'visible');
      $("#journey-window iframe").css('display', 'block');
      appendToDock(this);
    });
    $("#sttropez").bind('vclick', function (e){
      $("#sttropez-window").css('visibility', 'visible');
      $("#sttropez-window iframe").css('display', 'block');
      appendToDock(this);
    });
    $("#imdb").bind('vclick', function (e){
      $("#imdb-window").css('visibility', 'visible');
      $("#imdb-window iframe").css('display', 'block');
      appendToDock(this);
    });
    $("#about").bind('vclick', function (e){
      $("#about-window").css('visibility', 'visible');
      $("#about-window iframe").css('display', 'block');
      appendToDock(this);
    });
    $(".close").bind('vclick', function (e){
      $(this).parent().parent().parent().find('.iframe').find('iframe').css('display', 'none');
      $(this).parent().parent().parent().css('visibility', 'hidden');
      var imgsrc = $(this).parent().parent().find('img').attr('src');
      var red = $(".bottom-dock").find("img[src=" + "'" + imgsrc + "'" +"]").parent();
      red.remove();
    });
    $("#email-window .close").bind('vclick', function (e){
      $('contactform').replaceWith(originalState.clone());
      $('contactform').replaceWith(originalState);
    });
    $("#drivein-window .close").bind('vclick', function (e){
      var fillwidth = document.getElementById('ditiframe').contentWindow['canvasVideo'];
      console.log(fillwidth);
      if (fillwidth.playing) {
        console.log("playing, should stop");
        fillwidth.pause();
      }
      $(this).parent().parent().parent().find('.iframe').find('iframe').css('display', 'none');
      $(this).parent().parent().parent().css('visibility', 'hidden');
    });
    
    var menuShown = false;
    $(".start-button").bind('vclick', function (e){
      if (menuShown === false) {
        menuShown = true;
        $(".start-menu").stop().animate({height: "+=273px"}, 200);
        
      }
      else if (menuShown === true && $(".start-button").blur()){
        menuShown = false;
        $(".start-menu").stop().animate({height: "-=273px"}, 200);
      }
    });
    $('.start-button').on('blur', (function(){
      if (menuShown === true) { 
        menuShown = false;
        $(".start-menu").stop().animate({height: "-=273px"}, 200);
      }
    })
  )
});
</script>
</body>
</html>